include "nested_def.spl";

procedure traverse(x: OuterNode, y: OuterNode)
  requires nlseg(x, y)
  ensures nlseg(x, y)
{
  var oc := x;
  while (oc != y)
    invariant nlseg(x, oc) &*& nlseg(oc, y)
  {
    var ic := oc.down;
    while (ic != null)
      invariant nlseg(x, oc) &*& oc.onext |-> oc.onext &*& nlseg(oc.onext, y) &*& lseg(oc.down, ic) &*& lseg(ic, null)
    {
      ic := ic.inext;
    }
    oc := oc.onext;
  }
}
